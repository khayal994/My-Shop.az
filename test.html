<!DOCTYPE html>
<html>
<head>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="new.css">
<link rel="stylesheet" href="search.css">
<style>
    @media (max-width: 768px) {
        .sıfırla{
            color: red;
            text-decoration: underline;
             cursor: pointer;
            margin-top: -3px;
        }
        .w3-containers{
            position: fixed;
            background-color: #ddd;
            top: 0;
            width: 100%;
            height: 40px;
    }
    .w3-containerH5{
        position: absolute;
        top: 7px;
        margin-left: 120px;
    }
       
        .sıfırla{
            color: red;
            text-decoration: underline;
             cursor: pointer;
             position: absolute;
             top: 20px;
             right: 20px;
        }
        .ww{
        z-index:6;
        width:100%;
        height: 100%;
        bottom: 0;
    }
        .filter-section {
            padding: 10px;
        }

        .filter {
            margin-right: 10px;
        }
    }

    @media (max-width: 480px) {
        .filter {
            width: 100%;
            margin-right: 0;
        }
    }
    @media (max-width: 320px) {
        .filterDesing{
            width: 97%;
            border-radius: 6px;
            margin-left: 3px;

        }
        .ww{
        z-index:6;
        width:100%;
        height: 100%;
        bottom: 0;
    }

    }
    /* Filter section styles */
    .filter-section {
        background-color: #f9f9f9;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }


    .filter-section h2 {
        font-size: 1.5rem;
        margin-bottom: 10px;
    }

    .filters {
        display: flex;
        flex-wrap: wrap;
    }

    .filter {
        margin-right: 20px;
        margin-bottom: 10px;
    }

    .filter label {
        font-weight: bold;
    }

    .filter input[type="text"],
    .filter select,
    .filter input[type="number"],
    .filter input[type="range"],
    .filter input[type="color"] {
        padding: 8px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        width: 150px;
    }

    .filter input[type="range"] {
        width: 100%;
    }

    .filter button {
        background-color: #4CAF50;
        color: white;
        padding: 8px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .filter button:hover {
        background-color: #45a049;
    }

    .w3-sidebar{
        scrollbar-width: none;
    }
</style>

</head>
<body class="w3-light-grey">
<nav class="w3-sidebar ww w3-collapse w3-white w3-animate-left" id="mySidebar"><br>

    <div class="w3-containers">
        <i class="fa-solid fa-reply sa" onclick="applyFilterAndClose()"></i>
      <h5 class="w3-containerH5">Filtrlər</h5>
      <div class="filterxa">
        <a id="resetFilters" class="sıfırla sa" href="#" onclick="resetFilters()" >Sıfırla</a>
    </div><hr>
    </div><br>
    <div class="w3-bar-block">

      <div class="filter">
          <label for="sizeFilter">Ölçü</label>
          <select id="sizeFilter" class="w3-input w3-border">
              <option value="">Hamısı</option>
              <option value="s">S</option>
              <option value="m">M</option>
              <option value="l">L</option>
              <option value="xl">XL</option>
          </select>
      </div>

      <div class="filter">
        <label for="brandFilter">Brend</label>
        <select id="brandFilter">
            <option value="">Hamısı</option>
            <option value="brand1">Brend 1</option>
            <option value="brand2">Brend 2</option>
            <option value="brand3">Brend 3</option>
        </select>
    </div>

      <div class="filter">
          <label for="shoeSizeFilter">Ayakkabı Ölçüsü</label>
          <input type="text" id="shoeSizeFilter" placeholder="Ayakkabı ölçüsü daxil edin">
      </div>
      <div class="filter">
          <label for="genderFilter">Cinsiyyət</label><br>
          <select id="genderFilter">
              <option value="">Hamısı</option>
              <option value="men">Kişi</option>
              <option value="women">Qadın</option>
          </select>
      </div>

      <div class="filter">
          <label for="colorFilter">Rəng</label><br>
          <select id="colorFilter">
              <option value="">Hamısı</option>
              <option value="red">Qırmızı</option>
              <option value="black">Qara</option>
              <option value="green">Yaşıl</option>
              <option value="blue">Mavi</option>
              <option value="yellow">Sarı</option>
              <option value="white">Ağ</option>
              <option value="lime">Lime</option>
              <option value="gold">Qızılı</option>
              <option value="beige">Bej</option>
              <option value="burgundy">Bordo</option>
              <option value="khaki">Haki</option>
              <option value="purple">Mor</option>
              <option value="orange">Narıncı</option>
          </select>

          <div class="filter">
            <label for="minPriceFilter">Min Qiymət</label>
            <input type="number" class="w3-input input w3-border" id="minPriceFilter" placeholder="Min qiymət daxil edin">
        </div>
        <div class="filter">
            <label for="maxPriceFilter">Max Qiymət</label>
            <input type="number" class="w3-input w3-border" id="maxPriceFilter" placeholder="Max qiymət daxil edin">
        </div>
      </div>
      <p><button  class="w3-button filterDesing w3-block w3-red w3-left-align" type="button" onclick="applyFilterAndClose()"><i class="fa fa-search w3-margin-right"></i> Filterlə</button></p>
      <br><br><br>
    </div>
  </nav>


<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:0px;">
    <div class="header-main  w3-top  w3-large" >
        <div class="search-bar search-barx">
            <input type="text" placeholder="Search..." id="searchInput">
             <button class="buton"><span class="material-icons " onclick="filterProducts()">search</span></button>
        </div>
        </div>      
    </div>  
</header>
<button class="w3-bar-item w3-button w3-hide-large w3-hover-none filterx" onclick="w3_open();"><i class="fa fa-filter"></i>Filterlə</button><br><br>


<div id="noProductsMessage" style="display: none; text-align: center; margin-top: 200px;">
  <p>Heç bir məhsul tapılmadı</p>
  <img src="file (1).png" alt="Üzgün icon" style="opacity: 0.3; width: 50px; height: 50px;">
</div>
</body>
<script>
            function filterProducts() {
    const searchInput = document.getElementById("searchInput").value.toLowerCase();
    const genderFilter = document.getElementById("genderFilter").value;
    const colorFilter = document.getElementById("colorFilter").value;
    const sizeFilter = document.getElementById("sizeFilter").value.toLowerCase();
    const minPriceFilter = document.getElementById("minPriceFilter").value;
    const maxPriceFilter = document.getElementById("maxPriceFilter").value;
    const brandFilter = document.getElementById("brandFilter").value;
    const cards = document.querySelectorAll(".product-cardxl");

    let anyProductsMatch = false; // Yalnız filterə uyğun məhsul varsa true olacaq

    cards.forEach(card => {
        const name = card.getAttribute("data-name-filter").toLowerCase();
        const category = card.getAttribute("data-category-filter").toLowerCase();
        const gender = card.getAttribute("data-gender-filter");
        const color = card.getAttribute("data-color-filter");
        const size = card.getAttribute("data-size-filter").toLowerCase();
        const price = parseFloat(card.getAttribute("data-price-filter"));
        const brand = card.getAttribute("data-brand-filter");

        let show = true;

        if (searchInput && !(name.includes(searchInput) || category.includes(searchInput))) {
            show = false;
        }

        if (genderFilter && gender !== genderFilter) {
            show = false;
        }

        if (colorFilter && color !== colorFilter) {
            show = false;
        }

        if (sizeFilter && !size.includes(sizeFilter)) {
            show = false;
        }

        if (minPriceFilter && price < parseFloat(minPriceFilter)) {
            show = false;
        }

        if (maxPriceFilter && price > parseFloat(maxPriceFilter)) {
            show = false;
        }

        if (brandFilter && brand !== brandFilter) {
            show = false;
        }

        card.style.display = show ? "block" : "none";

        if (show) {
            anyProductsMatch = true; // Filtrləmə nəticəsi varsa true olur
        }
    });

    // Əgər filtrə uyğun heç bir məhsul yoxdursa mesajı göstər
    if (!anyProductsMatch) {
        document.getElementById('noProductsMessage').style.display = 'block';
    } else {
        document.getElementById('noProductsMessage').style.display = 'none';
    }
}
function resetFilters() {
    document.getElementById("searchInput").value = "";
    document.getElementById("genderFilter").value = "";
    document.getElementById("colorFilter").value = "";
    document.getElementById("sizeFilter").value = "";
    document.getElementById("minPriceFilter").value = "";
    document.getElementById("maxPriceFilter").value = "";
    document.getElementById("brandFilter").value = "";
    filterProducts();
}
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
function toggleCart() {
    const cartSidebar = document.getElementById('cart-sidebarlar');
    const isOpen = cartSidebar.style.right === '0px';
    cartSidebar.style.right = isOpen ? '-400px' : '0px';
}
document.addEventListener('DOMContentLoaded', () => {
    const cartSidebar = document.getElementById('cart-sidebarlar');
    const cartCount = document.getElementById('cart-countlar');
    const totalPriceElement = document.getElementById('total-pricelar');
    const cartItemsContainer = document.querySelector('.cart-itemslar');

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    updateCart();

    document.querySelectorAll('.add-to-cartlar').forEach(button => {
        button.addEventListener('click', addToCart);
    });

    function addToCart(event) {
        const productCard = event.target.closest('.product-cardlar');
        const productId = productCard.dataset.id;
        const productName = productCard.dataset.name;
        const productPrice = parseFloat(productCard.dataset.price);
        const productImage = productCard.dataset.image;

        const existingProduct = cart.find(item => item.id === productId);
        if (existingProduct) {
            existingProduct.quantity++;
        } else {
            cart.push({
                id: productId,
                name: productName,
                price: productPrice,
                image: productImage,
                quantity: 1
            });
        }

        updateCart();
        toggleCart(true);  // Səbəti avtomatik açmaq üçün true parametri ilə çağırırıq
    }
    function removeFromCart(productId) {
        cart = cart.filter(item => item.id !== productId);
        updateCart();
    }

    function toggleCart(forceOpen = false) {
        const isOpen = cartSidebar.style.right === '0px';
        if (forceOpen || !isOpen) {
            cartSidebar.style.right = '0px';
        } else {
            cartSidebar.style.right = '-400px';
        }
    }
});   
function applyFilterAndClose() {
    filterProducts();
    w3_close();
}
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
} 
function applyFilterAndClose() {
    filterProducts();
    animateClose();
}

function w3_open() {
    const sidebar = document.getElementById("mySidebar");
    sidebar.style.display = "block";
    sidebar.style.transform = "translateX(0)";
    sidebar.style.opacity = "1";
}

function w3_close() {
    animateClose();
}

function animateClose() {
    const sidebar = document.getElementById("mySidebar");
    let opacity = 1;
    let transform = 0;
    
    const animate = () => {
        if (opacity > 0) {
            opacity -= 0.1;
            transform -= 10;
            sidebar.style.opacity = opacity;
            sidebar.style.transform = `translateX(${transform}px)`;
            requestAnimationFrame(animate);
        } else {
            sidebar.style.display = "none";
            sidebar.style.opacity = "1";
            sidebar.style.transform = "translateX(0)";
        }
    };
    animate();
}
</script>
</html>
